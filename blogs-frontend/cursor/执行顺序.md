# è§£å†³ç¼“å­˜é—®é¢˜çš„æ‰§è¡Œé¡ºåº

## ğŸš¨ ç¬¬ä¸€æ­¥ï¼šç«‹å³æ¸…é™¤ç¼“å­˜ï¼ˆå¿…é¡»æ‰§è¡Œï¼‰

**å…ˆæ‰§è¡Œè¿™ä¸ªï¼Œè§£å†³å½“å‰é—®é¢˜ï¼š**

```bash
# æ¸…é™¤ Nginx ä»£ç†ç¼“å­˜
rm -rf /www/server/nginx/proxy_cache_dir/*
mkdir -p /www/server/nginx/proxy_cache_dir
nginx -s reload

# éªŒè¯
curl -s http://localhost:3000 | grep -o "ä½ å¥½ï¼Œæˆ‘æ˜¯"
```

ç„¶åæ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆç¡¬åˆ·æ–° `Ctrl+Shift+R`ï¼‰ï¼Œè®¿é—® `http://119.91.150.19` éªŒè¯ã€‚

---

## âœ… ç¬¬äºŒæ­¥ï¼šæ·»åŠ é…ç½®ï¼ˆå¼ºçƒˆæ¨èï¼Œå¯é€‰ï¼‰

**å¦‚æœç¬¬ä¸€æ­¥è§£å†³äº†é—®é¢˜ï¼Œå»ºè®®æ·»åŠ é…ç½®ï¼Œé¿å…ä»¥åæ¯æ¬¡æ›´æ–°éƒ½è¦æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜ã€‚**

### ä¸ºä»€ä¹ˆæ¨èæ·»åŠ ï¼Ÿ

- âœ… **ä¸€åŠ³æ°¸é€¸**ï¼šä»¥åæ›´æ–°ä»£ç åï¼ŒHTML é¡µé¢ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä¸éœ€è¦æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜
- âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šé™æ€èµ„æºï¼ˆJS/CSSï¼‰ä»ç„¶ä¼šè¢«ç¼“å­˜ï¼Œä¸å½±å“åŠ è½½é€Ÿåº¦
- âœ… **æœ€ä½³å®è·µ**ï¼šåªç¼“å­˜é™æ€èµ„æºï¼Œä¸ç¼“å­˜åŠ¨æ€ HTML

### å¦‚ä½•æ·»åŠ ï¼Ÿ

1. **å…ˆæŸ¥çœ‹ç°æœ‰é…ç½®**ï¼š
   ```bash
   cat /www/server/panel/vhost/nginx/extension/frontend/*.conf
   ```

2. **å¤‡ä»½é…ç½®**ï¼š
   ```bash
   cp /www/server/panel/vhost/nginx/extension/frontend/*.conf /www/server/panel/vhost/nginx/extension/frontend/*.conf.bak
   ```

3. **ç¼–è¾‘é…ç½®æ–‡ä»¶**ï¼ˆåœ¨å®å¡”é¢æ¿æˆ–ä½¿ç”¨ `vi`ï¼‰ï¼š
   ```bash
   vi /www/server/panel/vhost/nginx/extension/frontend/*.conf
   ```

4. **æ·»åŠ ä»¥ä¸‹é…ç½®**ï¼ˆå¦‚æœæ–‡ä»¶ä¸­æ²¡æœ‰ `location /` å—ï¼Œå°±æ·»åŠ ï¼›å¦‚æœæœ‰ï¼Œå°±ä¿®æ”¹ï¼‰ï¼š
   ```nginx
   # ä¸ç¼“å­˜ HTML é¡µé¢
   location / {
       proxy_pass http://127.0.0.1:3000;
       proxy_set_header Host $host;
       proxy_set_header X-Real-IP $remote_addr;
       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       proxy_set_header X-Forwarded-Proto $scheme;
       
       # ç¦ç”¨ç¼“å­˜ HTML
       proxy_cache_bypass $http_upgrade;
       proxy_no_cache $http_upgrade;
       add_header Cache-Control "no-cache, no-store, must-revalidate";
       add_header Pragma "no-cache";
       add_header Expires "0";
   }
   
   # åªç¼“å­˜é™æ€èµ„æºï¼ˆJS/CSS/å›¾ç‰‡ï¼‰
   location /_next/static/ {
       proxy_pass http://127.0.0.1:3000;
       proxy_cache cache_one;
       proxy_cache_valid 200 30d;
       proxy_cache_key "$scheme$request_method$host$request_uri";
       expires 30d;
       add_header Cache-Control "public, immutable";
   }
   ```

5. **é‡æ–°åŠ è½½ Nginx**ï¼š
   ```bash
   nginx -t  # æµ‹è¯•é…ç½®æ˜¯å¦æ­£ç¡®
   nginx -s reload  # é‡æ–°åŠ è½½
   ```

---

## ğŸ“‹ æ€»ç»“

| æ­¥éª¤ | æ“ä½œ | æ˜¯å¦å¿…é¡» | ä½œç”¨ |
|------|------|---------|------|
| ç¬¬ä¸€æ­¥ | æ¸…é™¤ç¼“å­˜ | âœ… **å¿…é¡»** | è§£å†³å½“å‰é—®é¢˜ |
| ç¬¬äºŒæ­¥ | æ·»åŠ é…ç½® | â­ **å¼ºçƒˆæ¨è** | é¿å…ä»¥åæ¯æ¬¡éƒ½è¦æ‰‹åŠ¨æ¸…é™¤ |

**å»ºè®®ï¼šå…ˆæ‰§è¡Œç¬¬ä¸€æ­¥ï¼Œç¡®è®¤é—®é¢˜è§£å†³åï¼Œå†æ‰§è¡Œç¬¬äºŒæ­¥ã€‚**
